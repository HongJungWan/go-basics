package main

import (
	"fmt"
	"sync"
	"time"
)

func main() {
	var wg sync.WaitGroup
	ch := make(chan int)

	wg.Add(1)
	go square(&wg, ch)

	for i := 0; i < 10; i++ {
		ch <- i * 2
	}
	close(ch)
	wg.Wait()
}

func square(wg *sync.WaitGroup, ch chan int) {
	for n := range ch {
		fmt.Printf("Square: %d\n", n*n)
		time.Sleep(time.Second)
	}
	wg.Done()
}

/*
ðŸ“Œ ë²„í¼ë¥¼ ê°€ì§„ ì±„ë„
- ë‚´ë¶€ì— ë°ì´í„°ë¥¼ ë³´ê´€í•  ìˆ˜ ìžˆëŠ” ë©”ëª¨ë¦¬ ì˜ì—­ì„ ë²„í¼ë¼ê³  ë¶€ë¥¸ë‹¤.
- ë²„í¼ê°€ ë‹¤ ì°¨ë©´, ë²„í¼ê°€ ì—†ì„ ë•Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë¹ˆìžë¦¬ê°€ ìƒê¸¸ ë•Œ ê¹Œì§€ ëŒ€ê¸°í•œë‹¤.
- ë°ì´í„°ë¥¼ ì œë•Œ ë¹¼ê°€ì§€ ì•Šìœ¼ë©´, ë²„í¼ê°€ ì—†ì„ ë•Œ ì²˜ëŸ¼ ê³ ë£¨í‹´ì´ ë©ˆì¶”ê²Œ ëœë‹¤.

ðŸ“Œ ì±„ë„ì„ ë‹¤ ì‚¬ìš©í•˜ë©´ close(ch)ë¥¼ í˜¸ì¶œí•´ ì±„ë„ì„ ë‹«ê³  ì±„ë„ì´ ë‹«í˜”ìŒì„ ì•Œë ¤ì¤˜ì•¼ í•œë‹¤.
- ì±„ë„ì—ì„œ ë°ì´í„°ë¥¼ ëª¨ë‘ ë¹¼ë‚¸ ìƒíƒœì´ê³  ì±„ë„ì´ ë‹«í˜”ìœ¼ë©´ for rangeë¬¸ì„ ë¹ ì ¸ë‚˜ê°€ê²Œ ëœë‹¤.
- ì±„ë„ì„ ì œë•Œ ë‹«ì•„ì£¼ì§€ ì•Šì•„ì„œ ê³ ë£¨í‹´ì—ì„œ ë°ì´í„°ë¥¼ ê¸°ë‹¤ë¦¬ë©° ë¬´í•œ ëŒ€ê¸°í•˜ëŠ” ê²½ìš°ë¥¼ ì¢€ë¹„ ë£¨í‹´ ë˜ëŠ” ê³ ë£¨í‹´ ë¦­(leak)ì´ë¼ê³  í•œë‹¤.
- ì•„ë¬´ë¦¬ ê²½ëŸ‰ ìŠ¤ë ˆë“œë¼ê³  í•´ë„ ê³ ë£¨í‹´ ë˜í•œ ë©”ëª¨ë¦¬ì™€ ì„±ëŠ¥ì„ ì°¨ì§€í•˜ê¸° ë•Œë¬¸ì— ì´ëŸ° ì¢€ë¹„ ë£¨í‹´ì´ ë§Žì•„ì§€ë©´ ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•  ìˆ˜ ìžˆë‹¤.
- ê·¸ëž˜ì„œ ë†€ê³  ìžˆëŠ” ê³ ë£¨í‹´ì´ ì—†ëŠ”ì§€ ìž˜ ì²´í¬í•´ë´ì•¼í•œë‹¤.
*/
