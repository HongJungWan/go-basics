package main

import "fmt"

func CaptureLoop() {
	f := make([]func(), 3) // í•¨ìˆ˜ ë¦¬í„°ëŸ´ 3ê°œë¥¼ ê°€ì§„ ìŠ¬ë¼ì´ìŠ¤
	fmt.Println("Value Loop")
	for i := 0; i < 3; i++ {
		f[i] = func() {
			fmt.Println(i)
		}
	}

	for i := 0; i < 3; i++ {
		f[i]() // f[i]ì— ì €ì¥ëœ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ì˜ë¯¸
	}
}

func CaptureLoop2() {
	f := make([]func(), 3)
	fmt.Println("Value Loop2")
	for i := 0; i < 3; i++ {
		v := i // ğŸš© v ë³€ìˆ˜ì— iê°’ ë³µì‚¬, i ë³€ìˆ˜ê°€ ì°¸ì¡°ë¡œ ìº¡ì³ë˜ëŠ” ë¬¸ì œ í˜„ìƒì„ ê°’ ë³µì‚¬ë¡œ í•´ê²°

		f[i] = func() {
			fmt.Println(v) // ìº¡ì³ëœ vê°’ ì¶œë ¥
		}
	}

	for i := 0; i < 3; i++ {
		f[i]()
	}
}

func main() {
	CaptureLoop()
	CaptureLoop2()
}

/*
ğŸ“Œ í•¨ìˆ˜ ë¦¬í„°ëŸ´ ë‚´ë¶€ ìƒíƒœ.
- í•¨ìˆ˜ ë¦¬í„°ëŸ´ì€ í•„ìš”í•œ ë³€ìˆ˜ë¥¼ ë‚´ë¶€ ìƒíƒœë¡œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.
- í•¨ìˆ˜ ë¦¬í„°ëŸ´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì™¸ë¶€ ë³€ìˆ˜ëŠ” ìë™ìœ¼ë¡œ í•¨ìˆ˜ ë‚´ë¶€ ìƒíƒœë¡œ ì €ì¥ëœë‹¤.

func main() {
	i := 0

	f := func() {
		i += 10 // iì— 10 ë”í•˜ê¸°
	}

	i++

	f() // f í•¨ìˆ˜ íƒ€ì… ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ í•¨ìˆ˜ ë¦¬í„°ëŸ´ ì‹¤í–‰

	fmt.Println(i) // 11
}

ğŸ“Œ iê°’ì´ í•¨ìˆ˜ ë¦¬í„°ëŸ´ì´ ì •ì˜ë˜ëŠ” ì‹œì ì´ ì•„ë‹Œ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ì‹œì  ê°’ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê²ƒì„ ì£¼ì˜í•˜ì.
- í•¨ìˆ˜ ë¦¬í„°ëŸ´ì´ ì •ì˜ë˜ëŠ” ì‹œì ì— iëŠ” 0ì´ì§€ë§Œ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ì‹œì ì€ i++ì´ ì‹¤í–‰ëœ ë‹¤ìŒì´ê¸° ë•Œë¬¸ì— ë¦¬í„°ëŸ´ ë‚´ë¶€ì˜ iëŠ” 0ì´ ì•„ë‹ˆë¼ 1ì´ ëœë‹¤.
- í•¨ìˆ˜ ë¦¬í„°ëŸ´ì—ì„œ ì™¸ë¶€ ë³€ìˆ˜ë¥¼ ë‚´ë¶€ ìƒíƒœë¡œ ê°€ì ¸ì˜¬ ë•Œ ê°’ ë³µì‚¬ê°€ ì•„ë‹Œ ì¸ìŠ¤í„´ìŠ¤ ì°¸ì¡°ë¡œ ê°€ì ¸ì˜¤ê²Œ ëœë‹¤.
- í¬ì¸í„° í˜•íƒœë¡œ ê°€ì ¸ì˜¨ë‹¤ê³  ë³´ë©´ í¸í•˜ë‹¤.


ğŸ“Œ í•¨ìˆ˜ ë¦¬í„°ëŸ´ ì™¸ë¶€ ë³€ìˆ˜ë¥¼ ë‚´ë¶€ ìƒíƒœë¡œ ê°€ì ¸ì˜¤ëŠ” ìº¡ì³(capture)ë¼ê³  í•œë‹¤.
- ìº¡ì³ëŠ” ê°’ ë³µì‚¬ê°€ ì•„ë‹Œ ì°¸ì¡° í˜•íƒœë¡œ ê°€ì ¸ì˜¤ê²Œ ë˜ë‹ˆ ì£¼ì˜í•´ì•¼ í•œë‹¤.


ğŸ“Œ ì°¸ì¡°ë¡œ ë³€ìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤ëŠ”ê²Œ ë¬´ì—‡ì¼ê¹Œ?
- ë³€ìˆ˜ì˜ ì£¼ì†Œë¥¼ í¬ì¸í„° ê°’ìœ¼ë¡œ ë³µì‚¬í•œë‹¤ê³  ë³´ë©´ ëœë‹¤.
- í•¨ìˆ˜ ë¦¬í„°ëŸ´ ì™¸ë¶€ì˜ ë³€ìˆ˜ ië¥¼ ìº¡ì³í•  ë•Œ ë³€ìˆ˜ iì˜ ì£¼ì†Ÿê°’ì„ í¬ì¸í„° í˜•íƒœë¡œ
  í•¨ìˆ˜ ë¦¬í„°ëŸ´ ë‚´ë¶€ ìƒíƒœë¡œ ê°€ì ¸ì™€ ë‚˜ì¤‘ì— ìº¡ì³ëœ ë‚´ë¶€ ìƒíƒœë¥¼ ì‚¬ìš©í•  ë•Œ ë©”ëª¨ë¦¬ ì£¼ì†Ÿê°’ì„ í†µí•´ ì™¸ë¶€ ë³€ìˆ˜ iì— ì ‘ê·¼í•˜ê²Œ ëœë‹¤.

- ì˜ˆë¥¼ ë“¤ì–´ ê³ ë£¨í‹´ì— ì˜í•´ì„œ í•¨ìˆ˜ ë¦¬í„°ëŸ´ì´ ì—¬ëŸ¬ ê³ ë£¨í‹´ì—ì„œ ì‹¤í–‰ë  ë•Œ ì£¼ì˜í•´ì•¼ í•œë‹¤.
*/
